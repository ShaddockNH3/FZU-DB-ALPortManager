# FZU-DB-ALPortManager
ç¦å·å¤§å­¦2025å¹´ä¸‹åŠå­¦æœŸæ•°æ®åº“å®è·µå¤§ä½œä¸š - ç¢§è“èˆªçº¿æ¸¯å£ç®¡ç†ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹
åŸºäº Go + Vue3 + PostgreSQL çš„ç¢§è“èˆªçº¿æ¸¯å£ç®¡ç†ç³»ç»Ÿï¼Œæ¨¡æ‹Ÿæ¸¸æˆä¸­çš„æ¸¯å£ç®¡ç†åŠŸèƒ½ï¼Œå®ç°èˆ°èˆ¹ä¿¡æ¯ç®¡ç†ã€è£…å¤‡ç³»ç»Ÿã€æ˜Ÿçº§ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### ä¸»è¦åŠŸèƒ½
- ğŸš¢ **èˆ°èˆ¹ç®¡ç†** - èˆ°èˆ¹ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥ï¼Œæ”¯æŒå¤šæ¡ä»¶ç­›é€‰
- â­ **æ˜Ÿçº§ç³»ç»Ÿ** - èˆ°èˆ¹å‡æ˜Ÿ/é™æ˜Ÿï¼Œæ»¡æ˜Ÿåè§£é”å…µè£…æ 
- âš”ï¸ **è£…å¤‡ç³»ç»Ÿ** - 277ç§è£…å¤‡ï¼ˆä¸»ç‚®ã€é±¼é›·ã€é˜²ç©ºç‚®ã€èˆ°è½½æœºã€è®¾å¤‡ã€å…µè£…ï¼‰
- ğŸ¯ **è£…å¤‡é™åˆ¶** - æ ¹æ®èˆ°ç§å’Œè£…å¤‡ç±»å‹è¿›è¡Œæ™ºèƒ½è¿‡æ»¤
- ğŸ“Š **æ•°æ®ç»Ÿè®¡** - æŒ‰é˜µè¥ã€ç¨€æœ‰åº¦ã€èˆ°ç§ç»Ÿè®¡èˆ°èˆ¹æ•°é‡
- ğŸ“„ **åˆ†é¡µæŸ¥è¯¢** - æ”¯æŒå¤§æ•°æ®é‡çš„åˆ†é¡µå±•ç¤º
- ğŸ¨ **ç°ä»£åŒ–UI** - å“åº”å¼è®¾è®¡ï¼ŒElement Plus ç»„ä»¶åº“

### æŠ€æœ¯ç‰¹ç‚¹
- å‰åç«¯åˆ†ç¦»æ¶æ„
- RESTful API è®¾è®¡
- GORM ORM + Code Generation
- PostgreSQL æ•°æ®åº“
- Docker å®¹å™¨åŒ–éƒ¨ç½²

## æŠ€æœ¯æ ˆ
- **åç«¯**: Go 1.23 + Hertz (CloudWeGo) + GORM 1.24 + Gen 0.3.21
- **å‰ç«¯**: Vue3 + Vite + Element Plus + Pinia + Axios
- **æ•°æ®åº“**: PostgreSQL 15 â†’ **openGauss (åä¸ºäº‘å¹³å°)** âš ï¸ å¾…è¿ç§»
- **å®¹å™¨åŒ–**: Docker + Docker Compose

> **âš ï¸ é‡è¦æç¤º**: æ ¹æ®å­¦æ ¡è¯¾ç¨‹è¦æ±‚ï¼Œæœ¬é¡¹ç›®åç»­å°†è¿ç§»è‡³åä¸ºäº‘å¹³å°çš„ openGauss æ•°æ®åº“ã€‚å½“å‰ä½¿ç”¨ PostgreSQL ä»…ç”¨äºæœ¬åœ°å¼€å‘æµ‹è¯•ã€‚

## æ•°æ®åº“è®¾è®¡

æœ¬é¡¹ç›®æ˜¯æ•°æ®åº“å®è·µè¯¾ç¨‹çš„å¤§ä½œä¸šï¼Œæ•°æ®åº“è®¾è®¡æ˜¯æ ¸å¿ƒéƒ¨åˆ†ã€‚ç³»ç»Ÿé‡‡ç”¨å…³ç³»å‹æ•°æ®åº“è®¾è®¡ï¼ŒåŒ…å«3ä¸ªä¸»è¦è¡¨å’Œå®Œæ•´çš„å¤–é”®çº¦æŸã€‚

### 1. ship_info è¡¨ï¼ˆèˆ°èˆ¹ä¿¡æ¯è¡¨ï¼‰
èˆ°èˆ¹åŸºæœ¬ä¿¡æ¯è¡¨ï¼Œå­˜å‚¨æ¸¸æˆä¸­æ¯è‰˜èˆ°èˆ¹çš„æ ¸å¿ƒå±æ€§ã€‚

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|------|------|------|------|
| id | SERIAL | PRIMARY KEY | ä¸»é”®ï¼Œè‡ªå¢ |
| ship_name | VARCHAR(255) | NOT NULL, INDEX | èˆ°èˆ¹åç§°ï¼Œå»ºç«‹ç´¢å¼•ä»¥ä¼˜åŒ–æŸ¥è¯¢ |
| rarity | VARCHAR(64) | NOT NULL | ç¨€æœ‰åº¦ï¼ˆæ™®é€š/ç¨€æœ‰/ç²¾é”/è¶…ç¨€æœ‰/æµ·ä¸Šä¼ å¥‡/æœ€é«˜æ–¹æ¡ˆ/å†³æˆ˜æ–¹æ¡ˆï¼‰ |
| ship_type | VARCHAR(64) | NOT NULL, INDEX | èˆ°ç§ï¼ˆé©±é€/è½»å·¡/é‡å·¡/æˆ˜åˆ—/æˆ˜å·¡/èˆªæ¯/è½»èˆª/æ½œè‰‡/ç»´ä¿®ï¼‰ |
| faction | VARCHAR(64) | NOT NULL, INDEX | é˜µè¥ï¼ˆç™½é¹°/çš‡å®¶/é‡æ¨±/é“è¡€/ä¸œç…Œ/åŒ—æ–¹è”åˆç­‰ï¼‰ |
| level | INTEGER | DEFAULT 1 | ç­‰çº§ï¼ˆ1-125ï¼‰ |
| stars | INTEGER | DEFAULT 1 | å½“å‰æ˜Ÿçº§ï¼ˆæ»¡æ˜Ÿåå¯è£…å¤‡å…µè£…ï¼‰ |
| created_at | TIMESTAMP | NOT NULL | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | NOT NULL | æ›´æ–°æ—¶é—´ |
| deleted_at | TIMESTAMP | INDEX | è½¯åˆ é™¤æ—¶é—´ï¼ˆGORMè½¯åˆ é™¤æ”¯æŒï¼‰ |

**è®¾è®¡è¦ç‚¹**ï¼š
- ä½¿ç”¨ `ship_type` å’Œ `faction` ç´¢å¼•ä¼˜åŒ–ç­›é€‰æŸ¥è¯¢
- `stars` å­—æ®µæ ¹æ®ç¨€æœ‰åº¦æœ‰ä¸åŒçš„æœ€å¤§å€¼ï¼ˆæ™®é€š4æ˜Ÿã€ç¨€æœ‰5æ˜Ÿã€è¶…ç¨€æœ‰6æ˜Ÿï¼‰
- è½¯åˆ é™¤æœºåˆ¶ï¼Œåˆ é™¤çš„æ•°æ®ä¸ä¼šçœŸæ­£è¢«åˆ é™¤ï¼Œä¾¿äºæ•°æ®æ¢å¤

### 2. equipments è¡¨ï¼ˆè£…å¤‡è¡¨ï¼‰
è£…å¤‡åº“è¡¨ï¼Œå­˜å‚¨æ¸¸æˆä¸­æ‰€æœ‰å¯ç”¨çš„è£…å¤‡ã€‚

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|------|------|------|------|
| id | SERIAL | PRIMARY KEY | ä¸»é”®ï¼Œè‡ªå¢ |
| name | VARCHAR(255) | UNIQUE, NOT NULL | è£…å¤‡åç§°ï¼Œå”¯ä¸€ç´¢å¼• |
| type | VARCHAR(64) | NOT NULL, INDEX | è£…å¤‡ç±»å‹ï¼ˆè§ä¸‹æ–¹æšä¸¾ï¼‰ |
| created_at | TIMESTAMP | NOT NULL | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | NOT NULL | æ›´æ–°æ—¶é—´ |
| deleted_at | TIMESTAMP | INDEX | è½¯åˆ é™¤æ—¶é—´ |

**è£…å¤‡ç±»å‹æšä¸¾**ï¼š
- `SMALL_CALIBER_MAIN_GUN` - å°å£å¾„ä¸»ç‚®ï¼ˆé©±é€ç‚®ï¼‰
- `MEDIUM_CALIBER_MAIN_GUN` - ä¸­å£å¾„ä¸»ç‚®ï¼ˆè½»å·¡ç‚®ï¼‰
- `LARGE_CALIBER_MAIN_GUN` - å¤§å£å¾„ä¸»ç‚®ï¼ˆé‡å·¡ç‚®ï¼‰
- `BATTLESHIP_MAIN_GUN` - æˆ˜åˆ—ç‚®
- `TORPEDO` - æ°´é¢é±¼é›·
- `SUBMARINE_TORPEDO` - æ½œè‰‡é±¼é›·
- `ANTI_AIR_GUN` - é˜²ç©ºç‚®
- `AUXILIARY` - è®¾å¤‡
- `FIGHTER` - æˆ˜æ–—æœº
- `DIVE_BOMBER` - è½°ç‚¸æœº
- `TORPEDO_BOMBER` - é±¼é›·æœº
- `AUGMENT` - å…µè£…ï¼ˆæ»¡æ˜Ÿä¸“å±ï¼‰

**è®¾è®¡è¦ç‚¹**ï¼š
- è£…å¤‡åç§°å”¯ä¸€ç´¢å¼•ï¼Œé˜²æ­¢é‡å¤æ·»åŠ 
- ç±»å‹å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œä¼˜åŒ–æŒ‰ç±»å‹æŸ¥è¯¢è£…å¤‡
- ç³»ç»Ÿåˆå§‹åŒ–æ—¶è‡ªåŠ¨å¯¼å…¥277ç§è£…å¤‡æ•°æ®

### 3. ship_equipments è¡¨ï¼ˆèˆ°èˆ¹è£…å¤‡å…³è”è¡¨ï¼‰
å¤šå¯¹å¤šå…³ç³»è¡¨ï¼Œè®°å½•æ¯è‰˜èˆ°èˆ¹çš„è£…å¤‡é…ç½®ã€‚

| å­—æ®µ | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|------|------|------|------|
| ship_id | INTEGER | NOT NULL, FK | å¤–é”®å…³è” ship_info.id |
| slot_index | INTEGER | NOT NULL | è£…å¤‡æ ä½ç´¢å¼•ï¼ˆ0-5ï¼Œ5ä¸ºå…µè£…æ ï¼‰ |
| equipment_id | INTEGER | NOT NULL, FK | å¤–é”®å…³è” equipments.id |
| created_at | TIMESTAMP | NOT NULL | è£…å¤‡æ—¶é—´ |
| PRIMARY KEY | (ship_id, slot_index) | - | å¤åˆä¸»é”® |

**å¤–é”®çº¦æŸ**ï¼š
```sql
FOREIGN KEY (ship_id) REFERENCES ship_info(id) ON DELETE CASCADE
FOREIGN KEY (equipment_id) REFERENCES equipments(id) ON DELETE RESTRICT
```

**è®¾è®¡è¦ç‚¹**ï¼š
- å¤åˆä¸»é”® `(ship_id, slot_index)` ç¡®ä¿æ¯ä¸ªè£…å¤‡æ ä½å”¯ä¸€
- çº§è”åˆ é™¤ï¼šåˆ é™¤èˆ°èˆ¹æ—¶è‡ªåŠ¨åˆ é™¤å…¶è£…å¤‡é…ç½®
- é™åˆ¶åˆ é™¤ï¼šè£…å¤‡è¢«ä½¿ç”¨æ—¶ä¸èƒ½åˆ é™¤
- `slot_index` 0-4 ä¸ºå¸¸è§„è£…å¤‡æ ï¼Œ5 ä¸ºå…µè£…æ ï¼ˆéœ€æ»¡æ˜Ÿï¼‰

### æ•°æ®åº“å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ship_info     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚â”€â”€â”€â”
â”‚ ship_name       â”‚   â”‚
â”‚ rarity          â”‚   â”‚ 1:N
â”‚ ship_type       â”‚   â”‚
â”‚ faction         â”‚   â”‚
â”‚ level           â”‚   â”‚
â”‚ stars           â”‚   â”‚
â”‚ ...             â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                      â”‚
                      â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ ship_equipments     â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚ ship_id (PK,FK) â”€â”€â”€â”€â”¼â”€â”€ å…³è”åˆ° ship_info.id
            â”‚ slot_index (PK)     â”‚
            â”‚ equipment_id (FK) â”€â”€â”¼â”€â”€ å…³è”åˆ° equipments.id
            â”‚ created_at          â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†‘
                      â”‚ N:1
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   equipments    â”‚   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ id (PK)         â”‚â”€â”€â”€â”˜
â”‚ name (UNIQUE)   â”‚
â”‚ type            â”‚
â”‚ ...             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®å®Œæ•´æ€§ä¿è¯

1. **ä¸»é”®çº¦æŸ** - æ‰€æœ‰è¡¨éƒ½æœ‰ä¸»é”®ï¼Œç¡®ä¿æ•°æ®å”¯ä¸€æ€§
2. **å¤–é”®çº¦æŸ** - ç»´æŠ¤èˆ°èˆ¹å’Œè£…å¤‡çš„å…³è”å…³ç³»
3. **å”¯ä¸€çº¦æŸ** - è£…å¤‡åç§°å”¯ä¸€ï¼Œé˜²æ­¢é‡å¤
4. **éç©ºçº¦æŸ** - å…³é”®å­—æ®µä¸å…è®¸ä¸ºç©º
5. **ç´¢å¼•ä¼˜åŒ–** - åœ¨å¸¸ç”¨æŸ¥è¯¢å­—æ®µå»ºç«‹ç´¢å¼•
6. **è½¯åˆ é™¤** - ä¿ç•™å†å²æ•°æ®ï¼Œæ”¯æŒæ•°æ®æ¢å¤

### ä¸šåŠ¡è§„åˆ™å®ç°

1. **æ˜Ÿçº§é™åˆ¶** - åº”ç”¨å±‚æ ¡éªŒæ˜Ÿçº§èŒƒå›´ï¼ˆä¸åŒç¨€æœ‰åº¦æœ‰ä¸åŒä¸Šé™ï¼‰
2. **è£…å¤‡ç±»å‹é™åˆ¶** - æ ¹æ®èˆ°ç§è¿‡æ»¤å¯è£…å¤‡çš„è£…å¤‡ç±»å‹
3. **å…µè£…é™åˆ¶** - åªæœ‰æ»¡æ˜Ÿèˆ°èˆ¹å¯ä»¥è£…å¤‡å…µè£…
4. **æŒ‰éœ€åˆ›å»º** - è£…å¤‡æ è®°å½•åœ¨è£…å¤‡æ—¶æ‰åˆ›å»ºï¼Œé¿å…ç©ºè®°å½•

## å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æ•°æ®åº“
```powershell
docker-compose up -d
```

### 2. å¯åŠ¨åç«¯
```powershell
cd PortManagerBackend
go run .
```
é¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨ï¼š
- åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„
- åˆå§‹åŒ–277ç§è£…å¤‡æ•°æ®

### 3. å¯åŠ¨å‰ç«¯
```powershell
cd PortManagerFrontend
npm install
npm run dev
```

### 4. è®¿é—®ç³»ç»Ÿ
æµè§ˆå™¨æ‰“å¼€ `http://localhost:5173`

## æ•°æ®åº“é…ç½®
é…ç½®æ–‡ä»¶ä½äº `PortManagerBackend/pkg/constants/constants.go`

é»˜è®¤é…ç½®ï¼š
```go
PostgresHost     = "localhost"
PostgresPort     = 5432
PostgresUser     = "commander"
PostgresPassword = "mysecretpassword"
PostgresDBName   = "al_port_db"
```

## API æ¥å£

### èˆ°èˆ¹ç®¡ç†
- `POST /api/v1/ship` - åˆ›å»ºèˆ°èˆ¹
- `GET /api/v1/ship/:id` - è·å–èˆ°èˆ¹è¯¦æƒ…ï¼ˆå«è£…å¤‡ä¿¡æ¯ï¼‰
- `PUT /api/v1/ship/:id` - æ›´æ–°èˆ°èˆ¹ä¿¡æ¯
- `DELETE /api/v1/ship/:id` - åˆ é™¤èˆ°èˆ¹
- `GET /api/v1/ships` - è·å–èˆ°èˆ¹åˆ—è¡¨ï¼ˆåˆ†é¡µ+ç­›é€‰ï¼‰
- `GET /api/v1/stats` - è·å–ç»Ÿè®¡æ•°æ®

### è£…å¤‡ç®¡ç†
- `GET /api/v1/equipments` - è·å–è£…å¤‡åˆ—è¡¨
- `PUT /api/v1/ship/:id/equip` - è£…å¤‡/å¸è½½è£…å¤‡

### è¯·æ±‚ç¤ºä¾‹

**åˆ›å»ºèˆ°èˆ¹**ï¼š
```json
{
  "shipName": "ä¼ä¸š",
  "rarity": "è¶…ç¨€æœ‰",
  "shipType": "èˆªæ¯",
  "faction": "ç™½é¹°"
}
```

**è£…å¤‡è£…å¤‡**ï¼š
```json
{
  "slotIndex": 0,
  "equipmentId": 25
}
```

## æœªæ¥è®¡åˆ’

### è¿ç§»è‡³ openGauss
> **å­¦æ ¡è¯¾ç¨‹è¦æ±‚**ï¼šæœ¬é¡¹ç›®å°†è¿ç§»è‡³åä¸ºäº‘ openGauss æ•°æ®åº“

openGauss æ˜¯åä¸ºå¼€æºçš„ä¼ä¸šçº§å…³ç³»å‹æ•°æ®åº“ï¼ŒåŸºäº PostgreSQL å¼€å‘ï¼Œå…¼å®¹ PostgreSQL åè®®ã€‚è¿ç§»å·¥ä½œåŒ…æ‹¬ï¼š
- ä¿®æ”¹æ•°æ®åº“é©±åŠ¨é…ç½®
- æµ‹è¯• GORM å…¼å®¹æ€§
- æ€§èƒ½å¯¹æ¯”æµ‹è¯•

å‚è€ƒèµ„æºï¼š
- [openGauss å®˜æ–¹æ–‡æ¡£](https://docs.opengauss.org/)
- [åä¸ºäº‘ GaussDB](https://www.huaweicloud.com/product/gaussdb.html)

## è®¸å¯è¯
MIT License

## ä½œè€…
[ShaddockNH3](https://github.com/ShaddockNH3)
